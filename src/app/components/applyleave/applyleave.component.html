<!-- Form Layout -->
<mat-card>
    <mat-card-content>
        <mat-accordion>


            <!-- View available VMs -->
            <mat-expansion-panel  (opened)="panelOpenState = true" (closed)="panelOpenState = false">
                <mat-expansion-panel-header>
            <!--    <mat-panel-title> View available VMs </mat-panel-title> -->
                <mat-panel-description> List of Applied Leaves
                  <!-- <mat-icon>account_circle</mat-icon> -->
                </mat-panel-description>
              </mat-expansion-panel-header>
              
              <div class="table-responsive">
                <table mat-table [dataSource]="dataleave" class="text-nowrap w-100">
          
                  <!-- Id Column -->
                  <ng-container matColumnDef="id">
                    <th mat-header-cell *matHeaderCellDef>Leave type</th>
                    <td mat-cell class="fw-medium" *matCellDef="let element"> {{element.leavetype}} </td>
                  </ng-container>

                  <ng-container matColumnDef="reason">
                    <th mat-header-cell *matHeaderCellDef>Leave Reason</th>
                    <td mat-cell class="fw-medium" *matCellDef="let element"> {{element.leavereason}} </td>
                  </ng-container>
          
                  <!-- Project Column -->
                  <ng-container matColumnDef="name">
                    <th mat-header-cell *matHeaderCellDef>From Date</th>
                    <td mat-cell *matCellDef="let element">
                      <p class="mb-0 fw-medium">{{element.datefrom}}</p>
                    </td>
                  </ng-container>
          
                  <!-- Priority Column -->
                  <ng-container matColumnDef="isActive">
                    <th mat-header-cell *matHeaderCellDef> To Date </th>
                    <td mat-cell *matCellDef="let element">                      
                        <p class="mb-0 fw-medium ">{{element.dateto}}</p>
                        <!-- <span class="badge {{element.isActive}} rounded-pill">{{element.isActive}</span> -->
                    </td>
                  </ng-container>
        
                   <!-- view Column -->
                   <ng-container matColumnDef="user">
                    <th mat-header-cell *matHeaderCellDef>Status</th>
                    <td mat-cell *matCellDef="let element">
                      <p class="mb-0 fw-medium">{{element.status}}</p>
                      <!-- <button mat-raised-button class="me-1 mb-1" (click)="onView()" color="primary">View</button> -->
                    </td>
                  </ng-container>

                  <ng-container matColumnDef="delete">
                    <th mat-header-cell *matHeaderCellDef></th>
                    <td mat-cell *matCellDef="let element">
                     <!-- <button mat-raised-button class="me-1 mb-1" color="primary">Delete</button>-->
                    </td>
                  </ng-container>
          
                  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                </table>
              </div><br>
             
              <!-- <button mat-button class="btn btn-info fw-normal" (click)="onCreate()"  >Add VM</button> -->
            </mat-expansion-panel>



            <!-- add VM -->
            <mat-expansion-panel>
              <mat-expansion-panel-header>
               <!-- <mat-panel-title> Add a VM </mat-panel-title>  -->
                <mat-panel-description>Apply Leave</mat-panel-description>
              </mat-expansion-panel-header>
              
              
               <form [formGroup]="leaveform" >

        
     
        <mat-form-field class="w-75 fs-16"  appearance="outline">
            <mat-label>Leave type</mat-label>
            <mat-select formControlName="leavetype" placeholder="Select leave type" >
              <ng-container *ngFor="let leavetype of leavetypes">
                <mat-option value="{{leavetype.id}}">{{leavetype.value}}</mat-option>
              </ng-container>
            </mat-select>
            <mat-error *ngIf="leavetype?.errors?.['required']">
                Leave type is required
              </mat-error>
           </mat-form-field>

        <mat-form-field class="w-75 fs-16" appearance="outline">
          <mat-label>Leave Reason</mat-label>
          <input matInput type="text" placeholder="Enter user's LastName" maxlength="30"  formControlName="leavereason"/>
          <mat-error *ngIf="leavetype?.errors?.['required']">
            Leave reason is required
          </mat-error>
        </mat-form-field>
       
        <mat-form-field class="w-75 fs-16"  appearance="outline">
          <mat-label>Date from</mat-label>
          <input matInput type="date" placeholder="Enter user's personal email" [min]="getToday()" ngModel  formControlName="datefrom"/>
          <mat-error *ngIf="datefrom?.errors?.['required']">
            date from is required
          </mat-error>
          
        </mat-form-field>

        <mat-form-field class="w-75 fs-16"  appearance="outline">
          <mat-label>Date to</mat-label>
          <input matInput type="date" placeholder="Enter user's official email" [min]="getToday()" ngModel formControlName="dateto"/>
          <mat-error *ngIf="dateto?.errors?.['required']">
            date to is required
          </mat-error>
        </mat-form-field><br>
        <button mat-button class="btn btn-info fw-normal" (click)="submit()"  [disabled]="leaveform.invalid"  type="submit">Submit</button>     
        <div role="green"  *ngIf="error.length > 0" class="alert alert-danger alert-text-danger align-items-center d-flex fs-14 mb-16 rounded ng-star-inserted"><i-feather _nghost-dto-c11="" class="feather-base me-12 text-danger" ng-reflect-name="alert-circle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="feather feather-alert-circle">
        <line x1="12" y1="16" x2="12.01" y2="16"></line>
        </svg></i-feather> {{error}} 
        </div> 

      </form>


              
            
           
    </mat-expansion-panel>
          </mat-accordion>
    </mat-card-content>
</mat-card>
